{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/amanda-kenzie/Documents/Faculdade/TCC/mobile/app-react-native-report/src/pages/Home/index.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport styles from \"./styles\";\nimport { typeVehicles } from \"../../config/constants\";\nimport { VehicleCardPrimary } from \"../../components/VehicleCard\";\nimport { Header } from \"../../components/Header\";\nimport { NextArrowButton } from \"../../components/Buttons/NextArrowButton\";\nimport actions from \"../../actions/todo\";\nimport { useDispatch } from \"react-redux\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useAuth } from \"../../hooks/auth\";\nimport BtnClose from \"../../components/BtnClose\";\nexport function VehicleSelect() {\n  var _this = this;\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      myReports = _useState2[0],\n      setMyReports = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      vehicleChoice = _useState4[0],\n      setVehicleChoie = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalVisible = _useState6[0],\n      setModalVisible = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      reportsFiltered = _useState8[0],\n      setReportsFiltered = _useState8[1];\n\n  var navigation = useNavigation();\n\n  var handleStart = function handleStart(value) {\n    return _regeneratorRuntime.async(function handleStart$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setVehicleChoie(value);\n            dispatch(actions.addTypeVehicle(vehicleChoice));\n\n            if (reportsFiltered.length > 0) {\n              setModalVisible(true);\n            }\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleViewReports = function handleViewReports() {\n    navigation.navigate(\"MyReports\");\n  };\n\n  var handleContinueReport = function handleContinueReport(data) {\n    dispatch(actions.resetDataState(data));\n    setModalVisible(!modalVisible);\n    navigation.navigate(\"NewReport\");\n  };\n\n  var handleNewReport = function handleNewReport() {\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n    navigation.navigate(\"NewReport\");\n  };\n\n  var ModalReport = function ModalReport() {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, React.createElement(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: modalVisible,\n      onRequestClose: function onRequestClose() {\n        setModalVisible(!modalVisible);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      style: styles.modalView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, React.createElement(BtnClose, {\n      onPress: function onPress() {\n        return setModalVisible(false);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    })), myReports.length > 0 ? React.createElement(React.Fragment, null, React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }\n    }, \"Laudos incompletos\"), React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }, \"Clique no qual deseja continuar:\"), React.createElement(View, {\n      style: styles.modalListItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    }, myReports.map(function (item, index) {\n      return React.createElement(TouchableOpacity, {\n        key: index,\n        onPress: function onPress() {\n          return handleContinueReport(item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }\n      }, \" \", React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 27\n        }\n      }, index + 1, \" - \"), item.LaudoVeicular.Data.Cabecalho.Rep));\n    }))) : React.createElement(React.Fragment, null, React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 19\n      }\n    }, \"Clique para continuar\")), React.createElement(TouchableOpacity, {\n      style: [styles.button, styles.buttonClose],\n      onPress: function onPress() {\n        setModalVisible(!modalVisible);\n        handleNewReport();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: styles.textStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, \"Criar um novo\"))))));\n  };\n\n  useEffect(function () {\n    function loadStorageData() {\n      var dataKey, data, reportsFiltered, reportsStoraged;\n      return _regeneratorRuntime.async(function loadStorageData$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dataKey = \"@laudos_user:\" + user.id;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(dataKey));\n\n            case 3:\n              data = _context2.sent;\n\n              if (!data) {\n                _context2.next = 9;\n                break;\n              }\n\n              reportsStoraged = JSON.parse(data);\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(reportsStoraged.filter(function (item) {\n                return item.LaudoVeicular.statusDoLaudo.completo == false && item.LaudoVeicular.statusDoLaudo.oculto == false;\n              }));\n\n            case 8:\n              reportsFiltered = _context2.sent;\n\n            case 9:\n              setMyReports(reportsFiltered);\n              console.log(reportsFiltered.length);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    loadStorageData();\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \" Escolha um ve\\xEDculo\")), React.createElement(View, {\n    style: styles.containerModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, React.createElement(ModalReport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: styles.vehicles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.cards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, typeVehicles.map(function (_ref, index) {\n    var title = _ref.title,\n        icone = _ref.icone,\n        available = _ref.available;\n    return React.createElement(VehicleCardPrimary, {\n      key: \"VehicleCardPrimary-\" + index,\n      title: title,\n      icone: icone,\n      available: available,\n      onPress: function onPress() {\n        handleStart(title);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    });\n  })), React.createElement(NextArrowButton, {\n    title: \"Ver Laudos\",\n    icone: \"upload-cloud\",\n    onPress: handleViewReports,\n    isValid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/amanda-kenzie/Documents/Faculdade/TCC/mobile/app-react-native-report/src/pages/Home/index.tsx"],"names":["React","useState","useEffect","useNavigation","styles","typeVehicles","VehicleCardPrimary","Header","NextArrowButton","actions","useDispatch","AsyncStorage","useAuth","BtnClose","VehicleSelect","user","dispatch","myReports","setMyReports","vehicleChoice","setVehicleChoie","modalVisible","setModalVisible","reportsFiltered","setReportsFiltered","navigation","handleStart","value","addTypeVehicle","length","handleViewReports","navigate","handleContinueReport","data","resetDataState","handleNewReport","ModalReport","modalView","modalText","modalListItem","map","item","index","LaudoVeicular","Data","Cabecalho","Rep","button","buttonClose","textStyle","loadStorageData","dataKey","id","getItem","reportsStoraged","JSON","parse","filter","statusDoLaudo","completo","oculto","console","log","container","title","containerModal","vehicles","cards","icone","available"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Alert, Modal, Text, View, TouchableOpacity } from \"react-native\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport styles from \"./styles\";\nimport { typeVehicles } from \"../../config/constants\";\nimport { VehicleCardPrimary } from \"../../components/VehicleCard\";\nimport { Header } from \"../../components/Header\";\nimport { NextArrowButton } from \"../../components/Buttons/NextArrowButton\";\n\nimport actions from \"../../actions/todo\";\n\nimport { useDispatch } from \"react-redux\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useAuth } from \"../../hooks/auth\";\n\nimport BtnClose from \"../../components/BtnClose\";\n\nexport function VehicleSelect() {\n  const { user } = useAuth();\n\n  const dispatch = useDispatch();\n  const [myReports, setMyReports] = useState<any[]>([]);\n  const [vehicleChoice, setVehicleChoie] = useState<any>(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const [reportsFiltered, setReportsFiltered] = useState<any[]>([]);\n\n  const navigation = useNavigation();\n\n  const handleStart = async (value: string) => {\n    setVehicleChoie(value);\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n\n    if (reportsFiltered.length > 0) {\n      setModalVisible(true);\n    }\n  };\n\n  const handleViewReports = () => {\n    navigation.navigate(\"MyReports\");\n  };\n\n  const handleContinueReport = (data: any) => {\n    dispatch(actions.resetDataState(data));\n    setModalVisible(!modalVisible);\n    navigation.navigate(\"NewReport\");\n  };\n  const handleNewReport = () => {\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n    navigation.navigate(\"NewReport\");\n  };\n\n  const ModalReport = () => {\n    return (\n      <View>\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisible}\n          onRequestClose={() => {\n            setModalVisible(!modalVisible);\n          }}\n        >\n          <View>\n            <View style={styles.modalView}>\n              <View>\n                <BtnClose onPress={() => setModalVisible(false)} />\n              </View>\n              {myReports.length > 0 ? (\n                <>\n                  <Text style={styles.modalText}>Laudos incompletos</Text>\n                  <Text style={styles.modalText}>\n                    Clique no qual deseja continuar:\n                  </Text>\n\n                  {/* <ScrollView style={styles.modalListItem}> */}\n                  <View style={styles.modalListItem}>\n                    {myReports.map((item: any, index: number) => (\n                      <TouchableOpacity\n                        key={index}\n                        onPress={() => handleContinueReport(item)}\n                      >\n                        <Text>\n                          {\" \"}\n                          <Text>{index + 1} - </Text>\n                          {item.LaudoVeicular.Data.Cabecalho.Rep}\n                        </Text>\n                      </TouchableOpacity>\n                    ))}\n                  </View>\n                </>\n              ) : (\n                <>\n                  <Text style={styles.modalText}>Clique para continuar</Text>\n                </>\n              )}\n              <TouchableOpacity\n                style={[styles.button, styles.buttonClose]}\n                onPress={() => {\n                  setModalVisible(!modalVisible);\n                  handleNewReport();\n                }}\n              >\n                <Text style={styles.textStyle}>Criar um novo</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    );\n  };\n\n  useEffect(() => {\n    async function loadStorageData() {\n      const dataKey = `@laudos_user:${user.id}`;\n      const data = await AsyncStorage.getItem(dataKey);\n      let reportsFiltered;\n      if (data) {\n        const reportsStoraged = JSON.parse(data);\n        reportsFiltered = await reportsStoraged.filter(\n          (item: any) =>\n            item.LaudoVeicular.statusDoLaudo.completo == false &&\n            item.LaudoVeicular.statusDoLaudo.oculto == false\n        );\n      }\n      setMyReports(reportsFiltered);\n      console.log(reportsFiltered.length);\n\n    }\n    loadStorageData();\n  }, []);\n\n  return (\n    <>\n      <View style={styles.container}>\n        <View>\n          <Header></Header>\n        </View>\n\n        <View>\n          <Text style={styles.title}> Escolha um veículo</Text>\n        </View>\n        <View style={styles.containerModal}>\n          <ModalReport />\n        </View>\n\n        <View style={styles.vehicles}>\n          <View style={styles.cards}>\n            {typeVehicles.map(({ title, icone, available }, index) => (\n              <VehicleCardPrimary\n                key={`VehicleCardPrimary-${index}`}\n                title={title}\n                icone={icone}\n                available={available}\n                onPress={() => {\n                  handleStart(title);\n                }}\n              />\n            ))}\n          </View>\n          <NextArrowButton\n            title=\"Ver Laudos\"\n            icone=\"upload-cloud\"\n            onPress={handleViewReports}\n            isValid={true}\n          />\n        </View>\n      </View>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}