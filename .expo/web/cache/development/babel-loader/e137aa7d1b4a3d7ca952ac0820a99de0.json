{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/amanda-kenzie/Documents/Faculdade/TCC/mobile/app-react-native-report/src/pages/Home/index.tsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport styles from \"./styles\";\nimport { typeVehicles } from \"../../config/constants\";\nimport { VehicleCardPrimary } from \"../../components/VehicleCard\";\nimport { Header } from \"../../components/Header\";\nimport { NextArrowButton } from \"../../components/Buttons/NextArrowButton\";\nimport actions from \"../../actions/todo\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useAuth } from \"../../hooks/auth\";\nimport BtnClose from \"../../components/BtnClose\";\nexport function VehicleSelect() {\n  var _this = this;\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      myReports = _useState2[0],\n      setMyReports = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      vehicleChoice = _useState4[0],\n      setVehicleChoie = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalVisible = _useState6[0],\n      setModalVisible = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setReportsFiltered = _useState8[1];\n\n  var navigation = useNavigation();\n  var state = useSelector(function (state) {\n    return state.reportReducer;\n  });\n\n  var handleStart = function handleStart(value) {\n    var dataKey, data, reportsFiltered, reportsStoraged;\n    return _regeneratorRuntime.async(function handleStart$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dataKey = \"@laudos_user:\" + user.id;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(dataKey));\n\n          case 3:\n            data = _context.sent;\n\n            if (data) {\n              reportsStoraged = JSON.parse(data);\n              reportsFiltered = reportsStoraged.filter(function (currentElement) {\n                if (currentElement.LaudoVeicular.statusDoLaudo.completo == false && currentElement.LaudoVeicular.statusDoLaudo.oculto == false) {\n                  return true;\n                }\n              });\n              setMyReports(reportsFiltered);\n            }\n\n            setVehicleChoie(value);\n            dispatch(actions.addTypeVehicle(vehicleChoice));\n\n            if (!(myReports.length > 0)) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", setModalVisible(true));\n\n          case 9:\n            return _context.abrupt(\"return\", navigation.navigate(\"NewReport\"));\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleViewReports = function handleViewReports() {\n    navigation.navigate(\"MyReports\");\n  };\n\n  var handleContinueReport = function handleContinueReport(data) {\n    dispatch(actions.resetDataState(data));\n    setModalVisible(!modalVisible);\n    navigation.navigate(\"NewReport\");\n  };\n\n  var handleNewReport = function handleNewReport() {\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n    navigation.navigate(\"NewReport\");\n  };\n\n  var ModalReport = function ModalReport() {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, React.createElement(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: modalVisible,\n      onRequestClose: function onRequestClose() {\n        setModalVisible(!modalVisible);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, React.createElement(View, {\n      style: styles.modalView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, React.createElement(BtnClose, {\n      onPress: function onPress() {\n        return setModalVisible(false);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    })), myReports.length > 0 ? React.createElement(React.Fragment, null, React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 19\n      }\n    }, \"Laudos incompletos\"), React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }, \"Clique no qual deseja continuar:\"), React.createElement(SafeAreaView, {\n      style: styles.containeModal,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, React.createElement(ScrollView, {\n      style: styles.scrollView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, myReports.map(function (item, index) {\n      return React.createElement(TouchableOpacity, {\n        key: index,\n        onPress: function onPress() {\n          return handleContinueReport(item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: styles.descriptModal,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 27\n        }\n      }, \" \", React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 29\n        }\n      }, index + 1, \" - \"), item.LaudoVeicular.Data.Cabecalho.Rep));\n    })))) : React.createElement(React.Fragment, null, React.createElement(Text, {\n      style: styles.modalText,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    }, \"Clique para continuar\")), React.createElement(TouchableOpacity, {\n      style: [styles.button, styles.buttonClose],\n      onPress: function onPress() {\n        setModalVisible(!modalVisible);\n        handleNewReport();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, React.createElement(Text, {\n      style: styles.textStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \"Criar um novo\"))))));\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \" Escolha um ve\\xEDculo\")), React.createElement(View, {\n    style: styles.containerModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, React.createElement(ModalReport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: styles.vehicles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.cards,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, typeVehicles.map(function (_ref, index) {\n    var title = _ref.title,\n        icone = _ref.icone,\n        available = _ref.available;\n    return React.createElement(VehicleCardPrimary, {\n      key: \"VehicleCardPrimary-\" + index,\n      title: title,\n      icone: icone,\n      available: available,\n      onPress: function onPress() {\n        handleStart(title);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    });\n  })), React.createElement(NextArrowButton, {\n    title: \"Ver Laudos\",\n    icone: \"upload-cloud\",\n    onPress: handleViewReports,\n    isValid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/amanda-kenzie/Documents/Faculdade/TCC/mobile/app-react-native-report/src/pages/Home/index.tsx"],"names":["React","useState","useNavigation","styles","typeVehicles","VehicleCardPrimary","Header","NextArrowButton","actions","useDispatch","useSelector","AsyncStorage","useAuth","BtnClose","VehicleSelect","user","dispatch","myReports","setMyReports","vehicleChoice","setVehicleChoie","modalVisible","setModalVisible","loading","setReportsFiltered","navigation","state","reportReducer","handleStart","value","dataKey","id","getItem","data","reportsStoraged","JSON","parse","reportsFiltered","filter","currentElement","LaudoVeicular","statusDoLaudo","completo","oculto","addTypeVehicle","length","navigate","handleViewReports","handleContinueReport","resetDataState","handleNewReport","ModalReport","modalView","modalText","containeModal","scrollView","map","item","index","descriptModal","Data","Cabecalho","Rep","button","buttonClose","textStyle","container","title","containerModal","vehicles","cards","icone","available"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Alert,\n  Modal,\n  Text,\n  View,\n  TouchableOpacity,\n  SafeAreaView,\n  ScrollView,\n  StatusBar,\n} from \"react-native\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport styles from \"./styles\";\nimport { typeVehicles } from \"../../config/constants\";\nimport { VehicleCardPrimary } from \"../../components/VehicleCard\";\nimport { Header } from \"../../components/Header\";\nimport { NextArrowButton } from \"../../components/Buttons/NextArrowButton\";\n\nimport actions from \"../../actions/todo\";\nimport type { RootState } from \"../../store/index\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useAuth } from \"../../hooks/auth\";\n\nimport BtnClose from \"../../components/BtnClose\";\n\nexport function VehicleSelect() {\n  const { user } = useAuth();\n\n  const dispatch = useDispatch();\n  const [myReports, setMyReports] = useState<any[]>([]);\n  const [vehicleChoice, setVehicleChoie] = useState<any>(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const [loading, setReportsFiltered] = useState<any[]>([]);\n\n  const navigation = useNavigation();\n  const state = useSelector((state: RootState) => state.reportReducer);\n  const handleStart = async (value: string) => {\n    const dataKey = `@laudos_user:${user.id}`;\n    const data = await AsyncStorage.getItem(dataKey);\n    let reportsFiltered;\n    if (data) {\n      const reportsStoraged = JSON.parse(data);\n      reportsFiltered = reportsStoraged.filter(function (currentElement: any) {\n        if (\n          currentElement.LaudoVeicular.statusDoLaudo.completo == false &&\n          currentElement.LaudoVeicular.statusDoLaudo.oculto == false\n        ) {\n          return true;\n        }\n      });\n\n      setMyReports(reportsFiltered);\n    }\n\n    setVehicleChoie(value);\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n    if (myReports.length > 0) {\n      return setModalVisible(true);\n    }\n    return navigation.navigate(\"NewReport\");\n  };\n  const handleViewReports = () => {\n    navigation.navigate(\"MyReports\");\n  };\n\n  const handleContinueReport = (data: any) => {\n    dispatch(actions.resetDataState(data));\n    setModalVisible(!modalVisible);\n    navigation.navigate(\"NewReport\");\n  };\n  const handleNewReport = () => {\n    dispatch(actions.addTypeVehicle(vehicleChoice));\n    navigation.navigate(\"NewReport\");\n  };\n\n  const ModalReport = () => {\n    return (\n      <View>\n        <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={modalVisible}\n          onRequestClose={() => {\n            setModalVisible(!modalVisible);\n          }}\n        >\n          <View>\n            <View style={styles.modalView}>\n              <View>\n                <BtnClose onPress={() => setModalVisible(false)} />\n              </View>\n              {myReports.length > 0 ? (\n                <>\n                  <Text style={styles.modalText}>Laudos incompletos</Text>\n                  <Text style={styles.modalText}>\n                    Clique no qual deseja continuar:\n                  </Text>\n\n                  <SafeAreaView style={styles.containeModal}>\n                    <ScrollView style={styles.scrollView}>\n                      {myReports.map((item: any, index: number) => (\n                        <TouchableOpacity\n                          key={index}\n                          onPress={() => handleContinueReport(item)}\n                        >\n                          <Text style={styles.descriptModal}>\n                            {\" \"}\n                            <Text>{index + 1} - </Text>\n                            {item.LaudoVeicular.Data.Cabecalho.Rep}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </SafeAreaView>\n                </>\n              ) : (\n                <>\n                  <Text style={styles.modalText}>Clique para continuar</Text>\n                </>\n              )}\n              <TouchableOpacity\n                style={[styles.button, styles.buttonClose]}\n                onPress={() => {\n                  setModalVisible(!modalVisible);\n                  handleNewReport();\n                }}\n              >\n                <Text style={styles.textStyle}>Criar um novo</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    );\n  };\n\n  return (\n    <>\n      <View style={styles.container}>\n        <View>\n          <Header></Header>\n        </View>\n\n        <View>\n          <Text style={styles.title}> Escolha um ve√≠culo</Text>\n        </View>\n        <View style={styles.containerModal}>\n          <ModalReport />\n        </View>\n\n        <View style={styles.vehicles}>\n          <View style={styles.cards}>\n            {typeVehicles.map(({ title, icone, available }, index) => (\n              <VehicleCardPrimary\n                key={`VehicleCardPrimary-${index}`}\n                title={title}\n                icone={icone}\n                available={available}\n                onPress={() => {\n                  handleStart(title);\n                }}\n              />\n            ))}\n          </View>\n          <NextArrowButton\n            title=\"Ver Laudos\"\n            icone=\"upload-cloud\"\n            onPress={handleViewReports}\n            isValid={true}\n          />\n        </View>\n      </View>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}